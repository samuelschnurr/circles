@using System.Net.Http.Json
@using Io.Schnurr.Circles.App.Store.App;
@using Io.Schnurr.Circles.Shared.Models;

<MudTable ServerData="new Func<TableState, Task<TableData<Offer>>>(async state => await ServerReload(state, true))" Hover="true" Striped="true" @ref="table" OnRowClick="@((TableRowClickEventArgs<Offer> r) => Console.WriteLine(r.Item.Id))">
    <ToolBarContent>
        <MudSpacer />
        <MudTextField T="string" ValueChanged="(s=>OnSearch(s))" Placeholder="Search" Adornment="Adornment.End" AdornmentIcon="@Icons.Material.Filled.Search" IconSize="Size.Medium" />
    </ToolBarContent>
    <HeaderContent>
        <MudTh><MudTableSortLabel SortLabel="id_field" T="Offer">Id</MudTableSortLabel></MudTh>
        <MudTh><MudTableSortLabel SortLabel="title_field" T="Offer">Title</MudTableSortLabel></MudTh>
        <MudTh><MudTableSortLabel SortLabel="description_field" T="Offer">Description</MudTableSortLabel></MudTh>
        <MudTh><MudTableSortLabel SortLabel="price_field" T="Offer">Price</MudTableSortLabel></MudTh>
        <MudTh><MudTableSortLabel SortLabel="createdAt_field" T="Offer">Created</MudTableSortLabel></MudTh>
    </HeaderContent>
    <RowTemplate>
        <MudTd Class="cursor-pointer" DataLabel="Id">@context.Id</MudTd>
        <MudTd Class="cursor-pointer" DataLabel="Title">@context.Title</MudTd>
        <MudTd Class="cursor-pointer" DataLabel="Description">@context.Description</MudTd>
        <MudTd Class="cursor-pointer" DataLabel="Price">@context.Price.ToCurrency()</MudTd>
        <MudTd Class="cursor-pointer" DataLabel="CreatedAt">@context.CreatedAt.ToShortDateString()</MudTd>
    </RowTemplate>
    <NoRecordsContent>
        <MudText>No matching records found</MudText>
    </NoRecordsContent>
    <LoadingContent>
        <MudText>Loading...</MudText>
    </LoadingContent>
    <PagerContent>
        <MudTablePager />
    </PagerContent>
</MudTable>
