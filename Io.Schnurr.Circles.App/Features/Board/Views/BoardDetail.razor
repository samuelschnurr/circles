@attribute [Route(Routes.Board.Detail)]
@inherits Fluxor.Blazor.Web.Components.FluxorComponent
@using Io.Schnurr.Circles.App.Features.App.Views

<PageTitle>Board</PageTitle>

<NavigationBar OnNavigateBack="NavigateBack" />

@{
    if (ShowLoadingSpinner)
    {
        <AppProgressCircular />
        return;
    }
}

<MudGrid>
    <MudItem xs="12" sm="7" xl="3">
        <MudImage Elevation="6" Src="https://cache.pressmailing.net/thumbnail/story_hires/64940fdd-8ec9-4854-98f9-e7f7467414b7/image.jpg" Fluid="true" ObjectFit="ObjectFit.Fill" Class="rounded h-100" />
    </MudItem>
    <MudItem xs="12" sm="5" xl="3" Class="d-flex">
        <MudPaper Elevation="6" Class="d-flex flex-column flex-grow-1 pa-3">
            <MudText Typo="Typo.h5">@Advertisement!.Title</MudText>
            <MudDivider Class="flex-grow-0 my-3" />
            <MudText Typo="Typo.h6">@Advertisement!.Price.ToCurrency()</MudText>
            <MudText Class="my-3" Typo="Typo.body1">Condition: @Advertisement!.Condition</MudText>
            <MudText Class="my-3" Typo="Typo.body1">Created by: @Advertisement!.CreatedBy</MudText>
            <MudSpacer />
            @* TODO: Correct color (blue white) *@
            <MudButton Class="align-self-center my-6" Variant="Variant.Filled" EndIcon="@Icons.Material.Filled.Send" Color="Color.Primary">
                <MudLink Href="@MailToLink">
                    Send message
                </MudLink>
            </MudButton>
            <MudDivider Class="flex-grow-0 my-3" />
            <MudContainer Class="d-flex px-0">
                <MudText Class="mud-text-secondary" Typo="Typo.body2">Advertisement no. @Advertisement!.Id</MudText>
                <MudSpacer />
                <MudText Class="mud-text-secondary" Typo="Typo.body2">Created @Advertisement!.CreatedAt.ToShortDateString()</MudText>
            </MudContainer>
        </MudPaper>
    </MudItem>
    <MudItem xs="12" xl="6" Class="d-flex">
        <MudPaper Elevation="6" Class="d-flex flex-column flex-grow-1 pa-3">
            <MudText Typo="Typo.h6">Description</MudText>
            <MudDivider Class="my-3 flex-grow-0" />
            @* TODO: Component extract *@
            @for (int i = 0; i < DescriptionParagraphs?.Length - 1; i++)
            {
                @* TODO: Always same paragraph. If no paragraphs, empty *@
                <MudText>@DescriptionParagraphs?[i]</MudText>
                @if (i < DescriptionParagraphs?.Length - 2)
                {
                    // Dont append to last iteration
                    <br />
                }
            }
        </MudPaper>
    </MudItem>
</MudGrid>